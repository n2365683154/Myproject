# æ¥šç„¶æ™ºè€ƒç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åœ¨çº¿è€ƒè¯•å¹³å°ï¼Œæ”¯æŒç®¡ç†å‘˜/å­¦å‘˜åŒè§’è‰²ã€é¢˜åº“ç®¡ç†ã€åœ¨çº¿è€ƒè¯•ã€è‡ªåŠ¨åˆ¤åˆ†ç­‰åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: FastAPI
- **ORM**: SQLAlchemy
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT + å›¾å½¢éªŒè¯ç  + çŸ­ä¿¡éªŒè¯ç 

### å‰ç«¯
- **æ¡†æ¶**: Vue 3 + Vite
- **UIç»„ä»¶**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **å›¾è¡¨**: ECharts
- **HTTP**: Axios

## åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ï¼ˆå¯†ç +æ‰‹æœºéªŒè¯ç åŒé€šé“ï¼‰
- JWTèº«ä»½è®¤è¯ä¸RBACæƒé™æ§åˆ¶
- å›¾å½¢éªŒè¯ç ç”Ÿæˆä¸æ ¡éªŒ
- çŸ­ä¿¡éªŒè¯ç å‘é€ä¸æ ¡éªŒ

### é¢˜åº“ç®¡ç†
- æ”¯æŒå•é€‰é¢˜ã€å¤šé€‰é¢˜ã€åˆ¤æ–­é¢˜ã€å¡«ç©ºé¢˜ã€ç®€ç­”é¢˜
- Excel (.xlsx) å¯¼å…¥è§£æ
- Word (.docx) å¯¼å…¥è§£æ
- å›¾ç‰‡OCRè¯†åˆ«å¯¼å…¥ï¼ˆPaddleOCRï¼‰
- çŸ¥è¯†ç‚¹æ ‘çŠ¶ç®¡ç†

### è€ƒè¯•åŠŸèƒ½
- é¡ºåºç»ƒä¹ /æ¨¡æ‹Ÿè€ƒè¯•
- å›ºå®šç»„å·/éšæœºç»„å·
- è‡ªåŠ¨è®¡æ—¶ã€è‡ªåŠ¨äº¤å·
- è‡ªåŠ¨åˆ¤åˆ†ï¼ˆé€‰æ‹©é¢˜ç²¾ç¡®åŒ¹é…ï¼Œå¡«ç©ºé¢˜æ¨¡ç³ŠåŒ¹é…ï¼‰
- é”™é¢˜è®°å½•ä¸é‡åš
- å­¦ä¹ è®°å½•ç»Ÿè®¡

## é¡¹ç›®ç»“æ„ï¼ˆå·²ä¼˜åŒ–ï¼‰

```
è€ƒè¯•ç³»ç»Ÿ/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydantic æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘ï¼ˆå·²æ•´åˆï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ grading_service.py  # ç»Ÿä¸€åˆ¤åˆ†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°ï¼ˆå·²æ•´åˆï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ common.py      # é€šç”¨å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/               # API è¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°ï¼ˆå·²æ•´åˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ answerUtils.js # ç­”æ¡ˆå¤„ç†å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ http.js        # HTTP è¯·æ±‚å·¥å…·
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ scripts/                    # ç®¡ç†è„šæœ¬ï¼ˆå·²æ•´åˆï¼‰
â”‚   â”œâ”€â”€ manage.sh              # å®¹å™¨ç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ optimize.sh            # ä»£ç ä¼˜åŒ–è„šæœ¬
â”‚   â””â”€â”€ refactor.sh            # æ¶æ„é‡æ„è„šæœ¬
â”‚
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                 # API æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOY.md              # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ DEVELOPMENT.md         # å¼€å‘æ–‡æ¡£
â”‚
â”œâ”€â”€ .env.example               # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker-compose.yml         # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ docker-compose.prod.yml    # ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ README.md
```

> ğŸ¯ **æ¶æ„ä¼˜åŒ–é‡ç‚¹**ï¼š
> - ç»Ÿä¸€åˆ¤åˆ†æœåŠ¡ï¼š`backend/app/services/grading_service.py`
> - é€šç”¨å·¥å…·åº“ï¼š`backend/app/utils/common.py`
> - ç­”æ¡ˆå¤„ç†å·¥å…·ï¼š`frontend/src/utils/answerUtils.js`
> - ç»Ÿä¸€HTTPè¯·æ±‚ï¼š`frontend/src/utils/http.js`
> - ç®¡ç†è„šæœ¬é›†ä¸­ï¼š`scripts/`ç›®å½•

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.11+
- Node.js 18+
- MySQL 8.0+
- Redis 7+

### æœ¬åœ°å¼€å‘

#### 1. åç«¯å¯åŠ¨

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“ç­‰ä¿¡æ¯

# å¯åŠ¨æœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### 2. å‰ç«¯å¯åŠ¨

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### 3. è®¿é—®ç³»ç»Ÿ

- å‰ç«¯: http://localhost:5173
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/api/docs

### ä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

é¡¹ç›®æä¾›äº†ç»Ÿä¸€çš„ç®¡ç†è„šæœ¬ï¼Œç®€åŒ–æ—¥å¸¸æ“ä½œï¼š

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# å¯åŠ¨æ‰€æœ‰å®¹å™¨
./scripts/manage.sh start

# åœæ­¢æ‰€æœ‰å®¹å™¨
./scripts/manage.sh stop

# é‡å¯æ‰€æœ‰å®¹å™¨
./scripts/manage.sh restart

# é‡å»ºæ‰€æœ‰å®¹å™¨ï¼ˆä¸ä½¿ç”¨ç¼“å­˜ï¼‰
./scripts/manage.sh rebuild

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
./scripts/manage.sh status

# æŸ¥çœ‹åç«¯æ—¥å¿—
./scripts/manage.sh logs backend

# åˆ›å»ºç®¡ç†å‘˜è´¦å·
./scripts/manage.sh admin

# ä¿®å¤éªŒè¯é€»è¾‘
./scripts/manage.sh fix-auth

# å¤‡ä»½æ•°æ®åº“
./scripts/manage.sh backup

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./scripts/manage.sh help
```

### Docker æ‰‹åŠ¨éƒ¨ç½²

```bash
# å¼€å‘ç¯å¢ƒ
docker-compose up -d

# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.prod.yml up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

## é»˜è®¤è´¦å·

ç³»ç»Ÿå¯åŠ¨åä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š

- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123

## APIæ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹APIæ–‡æ¡£ï¼š

- Swagger UI: http://localhost:8000/api/docs
- ReDoc: http://localhost:8000/api/redoc

## é…ç½®è¯´æ˜

### åç«¯é…ç½® (.env)

```env
# æ•°æ®åº“
DATABASE_URL=mysql+pymysql://user:password@localhost:3306/exam_system

# Redis
REDIS_URL=redis://localhost:6379/0

# JWT
SECRET_KEY=your-secret-key
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# é˜¿é‡Œäº‘çŸ­ä¿¡ï¼ˆå¯é€‰ï¼‰
ALIYUN_ACCESS_KEY_ID=your-key-id
ALIYUN_ACCESS_KEY_SECRET=your-key-secret
ALIYUN_SMS_SIGN_NAME=æ¥šç„¶æ™ºè€ƒ
ALIYUN_SMS_TEMPLATE_CODE=SMS_123456789
```

### å‰ç«¯é…ç½®

å¼€å‘ç¯å¢ƒä¸‹ï¼ŒAPIè¯·æ±‚ä¼šè‡ªåŠ¨ä»£ç†åˆ°åç«¯æœåŠ¡ã€‚ç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½®Nginxåå‘ä»£ç†ã€‚

## é¢˜åº“å¯¼å…¥æ ¼å¼

### Excelæ ¼å¼
| é¢˜å‹ | é¢˜å¹² | é€‰é¡¹ | ç­”æ¡ˆ | è§£æ | çŸ¥è¯†ç‚¹ | éš¾åº¦ |
|------|------|------|------|------|--------|------|
| å•é€‰é¢˜ | é¢˜ç›®å†…å®¹ | A.é€‰é¡¹A B.é€‰é¡¹B | A | è§£æå†…å®¹ | çŸ¥è¯†ç‚¹åç§° | ç®€å• |

### Wordæ ¼å¼
```
ã€é€‰æ‹©é¢˜ã€‘
1. é¢˜ç›®å†…å®¹
A. é€‰é¡¹A
B. é€‰é¡¹B
C. é€‰é¡¹C
D. é€‰é¡¹D
ç­”æ¡ˆï¼šA
è§£æï¼šè§£æå†…å®¹
```

## å¼€å‘è®¡åˆ’

- [ ] æ”¯æŒæ›´å¤šé¢˜å‹ï¼ˆè¿çº¿é¢˜ã€æ’åºé¢˜ï¼‰
- [ ] æ”¯æŒè¯•å·æ‰“å°å¯¼å‡º
- [ ] æ”¯æŒæˆç»©è¯ä¹¦ç”Ÿæˆ
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] æ”¯æŒè§†é¢‘é¢˜ç›®

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚
