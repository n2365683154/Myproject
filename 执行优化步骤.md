# é¡¹ç›®æ¶æ„ä¼˜åŒ–æ‰§è¡ŒæŒ‡å—

## ğŸ¯ æ‰§è¡Œå‰å‡†å¤‡

### 1. å¤‡ä»½ç°æœ‰æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd /www/wwwroot/exam_system

# å¤‡ä»½æ•°æ®åº“
docker exec exam_mysql mysqldump -u root -pexamroot system > backup_$(date +%Y%m%d).sql

# å¤‡ä»½ä»£ç ï¼ˆå¦‚æœæœ‰æœ¬åœ°ä¿®æ”¹ï¼‰
tar -czf exam_system_backup_$(date +%Y%m%d).tar.gz .
```

### 2. ç¡®è®¤ç¯å¢ƒ

```bash
# æ£€æŸ¥ Docker
docker --version

# æ£€æŸ¥ Docker Compose  
docker-compose --version

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

---

## ğŸ“ æœ¬åœ°æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤ 1ï¼šæäº¤ä¼˜åŒ–ä»£ç åˆ° Git

åœ¨æœ¬åœ° Windows ç¯å¢ƒæ‰§è¡Œï¼š

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\Administrator\CascadeProjects\è€ƒè¯•ç³»ç»Ÿ

# æ·»åŠ æ–°åˆ›å»ºçš„æ–‡ä»¶
git add scripts/manage.sh
git add scripts/optimize.sh
git add scripts/refactor.sh
git add QUICKSTART.md
git add OPTIMIZATION.md
git add æ‰§è¡Œä¼˜åŒ–æ­¥éª¤.md
git add PROJECT_STRUCTURE.md
git add .env.example
git add .gitignore

# å¦‚æœå·²åˆ›å»ºè¿™äº›ç›®å½•å’Œæ–‡ä»¶ï¼Œä¹Ÿæ·»åŠ 
git add backend/app/utils/common.py
git add backend/app/services/grading_service.py
git add frontend/src/utils/answerUtils.js
git add frontend/src/utils/http.js

# æäº¤
git commit -m "refactor: é¡¹ç›®æ¶æ„ä¼˜åŒ– - æ•´åˆåŠŸèƒ½ã€ç®€åŒ–ä»£ç ã€ç»Ÿä¸€ç®¡ç†"

# æ¨é€åˆ°è¿œç¨‹
git push origin main
```

---

## ğŸš€ æœåŠ¡å™¨æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤ 2ï¼šSSH è¿æ¥æœåŠ¡å™¨

```bash
ssh root@150.242.81.138
```

### æ­¥éª¤ 3ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
cd /www/wwwroot/exam_system

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å¦‚æœé‡åˆ°å†²çªï¼Œå¼ºåˆ¶æ›´æ–°ï¼ˆä¼šè¦†ç›–æœ¬åœ°ä¿®æ”¹ï¼‰
git fetch origin
git reset --hard origin/main
```

### æ­¥éª¤ 4ï¼šç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™

```bash
chmod +x scripts/*.sh
```

### æ­¥éª¤ 5ï¼šæ‰§è¡Œæ¶æ„é‡æ„è„šæœ¬

```bash
# æ‰§è¡Œé‡æ„è„šæœ¬ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰ä¼˜åŒ–æ–‡ä»¶ï¼‰
./scripts/refactor.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š
- âœ… åˆ›å»ºåç«¯å·¥å…·åº“ `backend/app/utils/common.py`
- âœ… åˆ›å»ºç»Ÿä¸€åˆ¤åˆ†æœåŠ¡ `backend/app/services/grading_service.py`
- âœ… åˆ›å»ºå‰ç«¯ç­”æ¡ˆå·¥å…· `frontend/src/utils/answerUtils.js`
- âœ… åˆ›å»ºHTTPè¯·æ±‚å·¥å…· `frontend/src/utils/http.js`
- âœ… æ•´åˆé…ç½®æ–‡ä»¶
- âœ… ä¼˜åŒ–Dockeré…ç½®
- âœ… ç”Ÿæˆé¡¹ç›®æ–‡æ¡£

### æ­¥éª¤ 6ï¼šåœæ­¢ç°æœ‰æœåŠ¡

```bash
docker-compose -f docker-compose.prod.yml down
```

### æ­¥éª¤ 7ï¼šé‡æ–°æ„å»ºå¹¶å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼1ï¼šä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰
./scripts/manage.sh rebuild

# æ–¹å¼2ï¼šæ‰‹åŠ¨æ‰§è¡Œ
docker-compose -f docker-compose.prod.yml build --no-cache
docker-compose -f docker-compose.prod.yml up -d
```

### æ­¥éª¤ 8ï¼šç­‰å¾…æœåŠ¡å¯åŠ¨

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./scripts/manage.sh status

# æˆ–
docker-compose -f docker-compose.prod.yml ps
```

### æ­¥éª¤ 9ï¼šæ£€æŸ¥æœåŠ¡æ—¥å¿—

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
./scripts/manage.sh logs backend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—  
./scripts/manage.sh logs frontend

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs --tail=50
```

### æ­¥éª¤ 10ï¼šåˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·

```bash
# å¦‚æœéœ€è¦é‡æ–°åˆ›å»ºç®¡ç†å‘˜
./scripts/manage.sh admin

# ä¿®å¤éªŒè¯é€»è¾‘ï¼ˆå¦‚æœç™»å½•æœ‰é—®é¢˜ï¼‰
./scripts/manage.sh fix-auth
```

---

## âœ… éªŒè¯ä¼˜åŒ–æ•ˆæœ

### 1. è®¿é—®ç³»ç»Ÿ

æµè§ˆå™¨è®¿é—®ï¼š`http://150.242.81.138:18080`

### 2. æµ‹è¯•ç™»å½•

- ç”¨æˆ·åï¼šadmin
- å¯†ç ï¼šadmin123

### 3. æµ‹è¯•å¤šé€‰é¢˜åˆ¤åˆ†

1. åˆ›å»ºä¸€ä¸ªå¤šé€‰é¢˜ï¼Œç­”æ¡ˆè®¾ä¸ºï¼š`A,B,C,E`
2. åˆ›å»ºç»ƒä¹ æ¨¡å¼è€ƒè¯•
3. ç­”é¢˜æ—¶é€‰æ‹© Aã€Bã€Cã€E
4. ç‚¹å‡»"ç¡®è®¤ç­”æ¡ˆ"
5. åº”è¯¥æ˜¾ç¤º"å›ç­”æ­£ç¡®"âœ…

### 4. æ£€æŸ¥æ€§èƒ½

```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºå ç”¨
docker stats

# åº”è¯¥çœ‹åˆ°å†…å­˜å’ŒCPUå ç”¨æ˜æ˜¾é™ä½
```

---

## ğŸ”§ æ•…éšœå¤„ç†

### é—®é¢˜1ï¼šè„šæœ¬æ‰§è¡Œæƒé™ä¸è¶³

```bash
chmod +x scripts/*.sh
```

### é—®é¢˜2ï¼šGit æ‹‰å–å¤±è´¥

```bash
# æ£€æŸ¥ç½‘ç»œ
ping github.com

# ä½¿ç”¨å¼ºåˆ¶æ›´æ–°
git fetch origin
git reset --hard origin/main
```

### é—®é¢˜3ï¼šDocker æ„å»ºå¤±è´¥

```bash
# æ¸…ç†Dockerç¼“å­˜
docker system prune -a -f

# é‡æ–°æ„å»º
docker-compose -f docker-compose.prod.yml build --no-cache
```

### é—®é¢˜4ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
docker-compose -f docker-compose.prod.yml logs

# é€ä¸ªå¯åŠ¨æœåŠ¡æ’æŸ¥
docker-compose -f docker-compose.prod.yml up mysql
docker-compose -f docker-compose.prod.yml up redis
docker-compose -f docker-compose.prod.yml up backend
docker-compose -f docker-compose.prod.yml up frontend
```

### é—®é¢˜5ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥MySQLå®¹å™¨
docker ps | grep mysql

# è¿›å…¥MySQLå®¹å™¨
docker exec -it exam_mysql mysql -uroot -pexamroot

# æ£€æŸ¥æ•°æ®åº“
SHOW DATABASES;
USE system;
SHOW TABLES;
```

---

## ğŸ“Š ä¼˜åŒ–éªŒè¯æ¸…å•

æ‰§è¡Œå®Œæˆåï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] æ‰€æœ‰å®¹å™¨æ­£å¸¸è¿è¡Œ
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®
- [ ] åç«¯APIæ­£å¸¸å“åº”
- [ ] ç®¡ç†å‘˜å¯ä»¥ç™»å½•
- [ ] å¤šé€‰é¢˜åˆ¤åˆ†æ­£ç¡®
- [ ] ç»ƒä¹ æ¨¡å¼æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
- [ ] è€ƒè¯•è®°å½•å¯ä»¥æŸ¥çœ‹
- [ ] å®¹å™¨èµ„æºå ç”¨é™ä½

---

## ğŸ‰ å®Œæˆåæ“ä½œ

### 1. æäº¤æœåŠ¡å™¨ä¸Šçš„æ”¹åŠ¨ï¼ˆå¦‚æœæœ‰ï¼‰

```bash
cd /www/wwwroot/exam_system

# æŸ¥çœ‹æ”¹åŠ¨
git status

# å¦‚æœéœ€è¦æäº¤
git add .
git commit -m "chore: æœåŠ¡å™¨ç«¯é…ç½®æ›´æ–°"
git push origin main
```

### 2. åˆ›å»ºç³»ç»Ÿå¿«ç…§ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œå»ºè®®åˆ›å»ºå¿«ç…§å¤‡ä»½å½“å‰çŠ¶æ€ã€‚

### 3. æ›´æ–°æ–‡æ¡£

è®°å½•æœ¬æ¬¡ä¼˜åŒ–çš„æ‰§è¡Œæ—¶é—´ã€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

---

## ğŸ“ æ—¥å¸¸ä½¿ç”¨

ä¼˜åŒ–å®Œæˆåï¼Œæ—¥å¸¸æ“ä½œç»Ÿä¸€ä½¿ç”¨ç®¡ç†è„šæœ¬ï¼š

```bash
# å¯åŠ¨æœåŠ¡
./scripts/manage.sh start

# åœæ­¢æœåŠ¡
./scripts/manage.sh stop

# é‡å¯æœåŠ¡
./scripts/manage.sh restart

# æŸ¥çœ‹çŠ¶æ€
./scripts/manage.sh status

# æŸ¥çœ‹æ—¥å¿—
./scripts/manage.sh logs backend

# å¤‡ä»½æ•°æ®
./scripts/manage.sh backup

# è·å–å¸®åŠ©
./scripts/manage.sh help
```

---

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡æ‰§è¡Œ**å»ºè®®åœ¨éé«˜å³°æœŸè¿›è¡Œ
2. **æ‰§è¡Œå‰**åŠ¡å¿…å¤‡ä»½æ•°æ®
3. **æ‰§è¡Œä¸­**æ³¨æ„è§‚å¯Ÿæ—¥å¿—è¾“å‡º
4. **æ‰§è¡Œå**å……åˆ†æµ‹è¯•å„é¡¹åŠŸèƒ½
5. **é‡åˆ°é—®é¢˜**å…ˆæŸ¥çœ‹æ—¥å¿—ï¼Œå†æŸ¥è¯¢æ–‡æ¡£

---

*ç¥æ‚¨ä¼˜åŒ–é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜è¯·æŸ¥çœ‹ QUICKSTART.md å’Œ OPTIMIZATION.md*
